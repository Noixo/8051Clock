C51 COMPILER V9.56.0.0   TIMING                                                            10/29/2017 01:41:24 PAGE 1   


C51 COMPILER V9.56.0.0, COMPILATION OF MODULE TIMING
OBJECT MODULE PLACED IN .\Objects\timing.obj
COMPILER INVOKED BY: C:\Keil_v5\C51\BIN\C51.EXE timing.c OPTIMIZE(9,SIZE) BROWSE MODP2 DEBUG OBJECTEXTEND TABS(2) OBJECT
                    -(.\Objects\timing.obj)

line level    source

   1          #include "timing.h"
   2          #include <intrins.h>
   3          //#include "external.h"
   4          //#include <reg51.h>
   5          void init_timing()
   6          {
   7   1        TMOD |= 0x01; //Turns on mode 1 16 bit timer for timer 0
   8   1      }
   9          
  10          // Time is 1/(crystal(mhz)/12(prescaler)) = x uS
  11          //Time needed is 65536-x = value for TH & TL
  12          void ms_delay(unsigned char num)  //1 miliseconds
  13          {
  14   1        unsigned char i;
  15   1      
  16   1        for(i = 0; i < num; i++)
  17   1        {
  18   2          TH0 = 0xFC; //Upper 8 bits
  19   2          TL0 = 0x17; //Lower 8 bits
  20   2          TR0 = 1;            //Starts the timer
  21   2      
  22   2          while(TF0 == 0);    //loops till timer overflow bit = 1
  23   2          TF0 = 0;            //clear the timer Over flow flag
  24   2        }
  25   1        TR0 = 0;            //Turns off the timer
  26   1      }
  27          #pragma SAVE
  28          #pragma OPTIMIZE(8)
  29          void us_delay() //37 microsecond timer
  30          {
  31   1        _nop_();
  32   1        _nop_();
  33   1        _nop_();
  34   1        _nop_();
  35   1        //_nop_();
  36   1        //_nop_();
  37   1        /*
  38   1        TH0 = 0xFF; // Upper 8 bits
  39   1        TL0 = 0xFF;//EE;//0xF8; //Lower 8 bits
  40   1        TR0 = 1;    //Starts the timer
  41   1      
  42   1        while(TF0 == 0);
  43   1        TR0 = 0;    //Turns off timer
  44   1        TF0 = 0;    //Clears overflow tag
  45   1        */
  46   1      }
  47          #pragma RESTORE
  48          void dhtTimer()
  49          {
  50   1        TH0 = 0xFF;
  51   1        TL0 = 0xF1;
  52   1        TR0 = 1;
  53   1        
  54   1        while(TF0 == 0);
C51 COMPILER V9.56.0.0   TIMING                                                            10/29/2017 01:41:24 PAGE 2   

  55   1        TR0 = 0;
  56   1        TF0 = 0;
  57   1      }
  58          
  59          void dhtInterrupt1()
  60          {
  61   1        /*
  62   1        TMOD &= 0xF0;
  63   1        TMOD |= 0x02;
  64   1        
  65   1        TH1 = 0x05;
  66   1        TL1 = 0x05;
  67   1        
  68   1        ET1 = 1;
  69   1        EA = 1;
  70   1        
  71   1        TR1 = 1;
  72   1        */
  73   1      }
  74          /*
  75          void dhtInterrupt() interrupt 1
  76          {
  77            //clear interrupt
  78            TF1 = 0;
  79            //stop timer
  80            TR1 = 0;
  81            //main();
  82          }
  83          */
  84          /*
  85          void us() //4 peek-to-peek - 6us rise to fall @ 
  86          {
  87            ;
  88          }
  89          */
  90          void timeout()  //For fixing DHT11 freezes
  91          {
  92   1        //TMOD
  93   1      }


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =     53    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =   ----    ----
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
